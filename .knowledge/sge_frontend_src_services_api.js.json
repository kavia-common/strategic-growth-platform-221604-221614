{"is_source_file": true, "format": "JavaScript", "description": "This file defines an API service module for a React frontend, using axios. It handles dynamic base URL resolution, manages authentication and tenant context via Supabase, and sets up request and response interceptors for handling tokens, tenant info, and error logging.", "external_files": ["axios", "../lib/supabase"], "external_methods": ["supabase.auth.getSession"], "published": ["default"], "classes": [], "methods": [{"name": "resolveBaseURL", "description": "Resolves the API base URL based on environment variables or fallback strategies, such as window location or default port assumptions."}, {"name": "getAuthContext()", "description": "Asynchronously fetches the current user's session from Supabase and extracts the access token and organization ID, handling potential errors gracefully.", "scope": "", "scopeKind": ""}], "calls": ["axios.create", "resolveBaseURL", "supabase.auth.getSession", "error?.config?.url", "error?.config?.method", "error?.config?.baseURL", "error?.response?.status", "error?.response?.data"], "search-terms": ["api service", "axios base URL resolution", "supabase session extraction", "request interceptor", "response interceptor", "tenant context", "auth token handling"], "state": 2, "file_id": 14, "knowledge_revision": 262, "git_revision": "223c16fb26ddea9eadd419e78b361f1617f77fd1", "revision_history": [{"30": ""}, {"54": "35f8da6e8159e348f52a3d9923dd2ab4ea833629"}, {"138": "35f8da6e8159e348f52a3d9923dd2ab4ea833629"}, {"210": "35f8da6e8159e348f52a3d9923dd2ab4ea833629"}, {"215": "0fc7f7146f11a8ba56e0e51656967d14e43fa8ce"}, {"232": "f0db8b00bb21ba6b96d61fb28e10ac3578d1bb3c"}, {"244": "f0db8b00bb21ba6b96d61fb28e10ac3578d1bb3c"}, {"262": "223c16fb26ddea9eadd419e78b361f1617f77fd1"}], "ctags": [{"_type": "tag", "name": "api", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221614/sge_frontend/src/services/api.js", "pattern": "/^const api = axios.create({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "base", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221614/sge_frontend/src/services/api.js", "pattern": "/^  let base = candidates[0];$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "candidates", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221614/sge_frontend/src/services/api.js", "pattern": "/^  const candidates = [$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getAuthContext", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221614/sge_frontend/src/services/api.js", "pattern": "/^async function getAuthContext() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "resolveBaseURL", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221614/sge_frontend/src/services/api.js", "pattern": "/^const resolveBaseURL = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/strategic-growth-platform-221604-221614/sge_frontend/src/services/api.js", "pattern": "/^      const url = new URL(window.location.href);$/", "language": "JavaScript", "kind": "constant"}], "hash": "8b6e5155e70ce5667631fed7b382eaf6", "format-version": 4, "code-base-name": "sge_frontend", "filename": "sge_frontend/src/services/api.js", "fields": [{"name": "let base = candidates[0];", "scope": "", "scopeKind": "", "description": "unavailable"}]}